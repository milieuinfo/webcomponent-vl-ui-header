import{vlElement,define,awaitScript}from"/node_modules/vl-ui-core/dist/vl-core.min.js";awaitScript("vl-header","https://prod.widgets.burgerprofiel.vlaanderen.be/api/v1/node_modules/@govflanders/vl-widget-polyfill/dist/index.js").then((()=>{define("vl-header",VlHeader)})).catch((()=>{define("vl-header",VlHeader)}));export class VlHeader extends(vlElement(HTMLElement)){static get EVENTS(){return{ready:"ready"}}static get _observedAttributes(){return["identifier"]}static get id(){return"header"}static get header(){return document.getElementById(VlHeader.id)}disconnectedCallback(){this._observer&&this._observer.disconnect()}get _widgetURL(){if(this._widgetUUID){return`${this._isDevelopment?"https://tni.widgets.burgerprofiel.dev-vlaanderen.be/api/v1/widget":"https://prod.widgets.burgerprofiel.vlaanderen.be/api/v1/widget"}/${this._widgetUUID}/embed`}}get _widgetUUID(){return this.dataset.vlIdentifier}get _isDevelopment(){return this.hasAttribute("data-vl-development")}getHeaderTemplate(){return`<div id="${VlHeader.id}"></div>`}_identifierChangedCallback(e,t){this.__addHeaderElement()}__addHeaderElement(){this._widgetURL&&fetch(this._widgetURL).then((e=>{if(e.ok)return e.text();throw Error(`Response geeft aan dat er een fout is: ${e.statusText}`)})).then((e=>this.__executeCode(e))).catch((e=>console.error(e)))}__executeCode(code){VlHeader.header||document.body.insertAdjacentHTML("afterbegin",this.getHeaderTemplate()),this._observer=this.__observeHeaderElementIsAdded(),eval(code.replace(/document\.write\((.*?)\);/,'document.getElementById("'+VlHeader.id+'").innerHTML = $1;'))}__observeHeaderElementIsAdded(){const e=t=>"HEADER"===t.tagName||t.childNodes&&[...t.childNodes].some(e);new MutationObserver(((t,d)=>{t.flatMap((e=>[...e.addedNodes])).some(e)&&(this.dispatchEvent(new CustomEvent(VlHeader.EVENTS.ready)),d.disconnect())})).observe(VlHeader.header,{childList:!0})}}